name: Download Bootstrap

on:
  push:
    branches: [ master ]
  schedule:
    - cron: '0 0 * * *' # 每天 0 点执行

jobs:
  download:
    runs-on: ubuntu-latest
    steps:
      - name: Get Latest Version
        id: latest_version
        run: echo "::set-output name=version::$(curl -s https://api.github.com/repos/twbs/bootstrap/releases/latest | grep 'tag_name' | cut -d\" -f4)" | sed 's/^.//'
      - name: Download latest Bootstrap
        run: |
          # 下载最新版本的 Bootstrap
          curl -sL https://github.com/twbs/bootstrap/releases/download/v${{ steps.latest_version.outputs.version }}/bootstrap-${{ steps.latest_version.outputs.version }}-dist.zip -o bootstrap.zip
          unzip bootstrap.zip
          mkdir -p public/bootstrap
          unzip -q bootstrap.zip -d public/bootstrap
          # 删除压缩包
          rm bootstrap.zip
      - name: Commit changes
        uses: EndBug/add-and-commit@v4
        with:
          message: "Update Bootstrap library"
          add: "public/bootstrap"
